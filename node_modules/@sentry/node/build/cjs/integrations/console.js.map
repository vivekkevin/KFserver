{"version":3,"file":"console.js","sources":["../../../src/integrations/console.ts"],"sourcesContent":["import * as util from 'node:util';\nimport { addBreadcrumb, defineIntegration, getClient } from '@sentry/core';\nimport { addConsoleInstrumentationHandler, severityLevelFromString, truncate } from '@sentry/utils';\n\nconst INTEGRATION_NAME = 'Console';\n\n/**\n * Capture console logs as breadcrumbs.\n */\nexport const consoleIntegration = defineIntegration(() => {\n  return {\n    name: INTEGRATION_NAME,\n    setup(client) {\n      addConsoleInstrumentationHandler(({ args, level }) => {\n        if (getClient() !== client) {\n          return;\n        }\n\n        addBreadcrumb(\n          {\n            category: 'console',\n            level: severityLevelFromString(level),\n            message: truncate(util.format.apply(undefined, args), 2048), // 2KB\n          },\n          {\n            input: [...args],\n            level,\n          },\n        );\n      });\n    },\n  };\n});\n"],"names":["defineIntegration","addConsoleInstrumentationHandler","getClient","addBreadcrumb","severityLevelFromString","truncate"],"mappings":";;;;;;AAIA,MAAM,gBAAA,GAAmB,SAAS;;AAElC;AACA;AACA;MACa,kBAAmB,GAAEA,sBAAiB,CAAC,MAAM;AAC1D,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,gBAAgB;AAC1B,IAAI,KAAK,CAAC,MAAM,EAAE;AAClB,MAAMC,sCAAgC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAA,EAAO,KAAK;AAC5D,QAAQ,IAAIC,cAAS,EAAG,KAAI,MAAM,EAAE;AACpC,UAAU;AACV;;AAEA,QAAQC,kBAAa;AACrB,UAAU;AACV,YAAY,QAAQ,EAAE,SAAS;AAC/B,YAAY,KAAK,EAAEC,6BAAuB,CAAC,KAAK,CAAC;AACjD,YAAY,OAAO,EAAEC,cAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC;AACvE,WAAW;AACX,UAAU;AACV,YAAY,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC;AAC5B,YAAY,KAAK;AACjB,WAAW;AACX,SAAS;AACT,OAAO,CAAC;AACR,KAAK;AACL,GAAG;AACH,CAAC;;;;"}